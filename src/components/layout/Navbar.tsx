import React, { useState, useEffect } from "react";
import { CustomButton } from "../ui/CustomButton";
import { cn } from "@/lib/utils";

const Navbar = () => {
  const [scrolled, setScrolled] = useState(false);
  const [menuOpen, setMenuOpen] = useState(false);

  // Change navbar style on scroll
  useEffect(() => {
    const handleScroll = () => {
      const offset = window.scrollY;
      if (offset > 50) {
        setScrolled(true);
      } else {
        setScrolled(false);
      }
    };

    window.addEventListener("scroll", handleScroll);
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  const toggleMenu = () => {
    setMenuOpen(!menuOpen);
  };

  return (
    <header
      className={cn(
        "fixed top-0 left-0 right-0 z-50 w-full transition-all duration-300",
        scrolled
          ? "py-3 glass shadow-sm border-b border-zahabi-gold/10"
          : "py-4 bg-white"
      )}
    >
      <div className="container mx-auto px-6 flex items-center justify-between">
        <a href="/" className="flex items-center">
          {/* <span className="mr-2 text-zahabi-gold">
            <svg
              width="28"
              height="32"
              viewBox="0 0 28 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0 13.0352V7.72076V6.9441C0 5.83584 0.460322 4.77775 1.27189 4.02291L4.68394 0.853014C5.27297 0.305428 6.04963 0 6.85465 0H20.6992C21.5479 0 22.3682 0.301065 23.0139 0.84647L26.5198 3.80911C27.327 4.49196 27.7917 5.49332 27.7917 6.54923V13.0352L18.5634 21.3297L12.3502 21.4737L21.3646 7.46769H6.46196L0 13.0352Z"
                fill="#CC9900"
              />
              <path
                d="M27.7939 18.9648V24.2792V25.0558C27.7939 26.1641 27.3335 27.2222 26.522 27.977L23.1099 31.1469C22.5209 31.6945 21.7442 31.9999 20.9392 31.9999H7.09465C6.246 31.9999 5.4257 31.6989 4.77994 31.1535L1.27408 28.1908C0.466883 27.508 0.00219727 26.5066 0.00219727 25.4507V18.9648L9.23045 10.6702L15.4437 10.5262L6.42925 24.5322H21.3319L27.7939 18.9648Z"
                fill="#CC9900"
              />
            </svg>
          </span>

          <span className="text-2xl font-semibold tracking-tighter">
            Zahabi
          </span> */}

          <svg
            width="112"
            height="32"
            viewBox="0 0 112 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            {/* <!-- Gold left shape --> */}
            <path
              d="M0 13.0352V7.72076V6.9441C0 5.83584 0.460322 4.77775 1.27189 4.02291L4.68394 0.853014C5.27297 0.305428 6.04963 0 6.85465 0H20.6992C21.5479 0 22.3682 0.301065 23.0139 0.84647L26.5198 3.80911C27.327 4.49196 27.7917 5.49332 27.7917 6.54923V13.0352L18.5634 21.3297L12.3502 21.4737L21.3646 7.46769H6.46196L0 13.0352Z"
              fill="#CC9900"
            />

            {/* <!-- Gold right shape --> */}
            <path
              d="M27.7939 18.9648V24.2792V25.0558C27.7939 26.1641 27.3335 27.2222 26.522 27.977L23.1099 31.1469C22.5209 31.6945 21.7442 31.9999 20.9392 31.9999H7.09465C6.246 31.9999 5.4257 31.6989 4.77994 31.1535L1.27408 28.1908C0.466883 27.508 0.00219727 26.5066 0.00219727 25.4507V18.9648L9.23045 10.6702L15.4437 10.5262L6.42925 24.5322H21.3319L27.7939 18.9648Z"
              fill="#CC9900"
            />

            {/* <!-- Black text characters --> */}
            <path
              d="M47.6865 24.2807C47.6133 24.3539 47.5101 24.3905 47.377 24.3905H36.7371C36.4575 24.3905 36.3177 24.2507 36.3177 23.9712V21.6781C36.3177 21.4851 36.3777 21.3087 36.4975 21.1456L41.8657 14.0502H36.8469C36.7138 14.0502 36.6106 14.0136 36.5374 13.9403C36.4642 13.8671 36.4276 13.7639 36.4276 13.6308V10.7354C36.4276 10.6023 36.4642 10.4991 36.5374 10.4259C36.6106 10.3526 36.7138 10.316 36.8469 10.316H46.9676C47.2405 10.316 47.377 10.4558 47.377 10.7354V12.8287C47.377 13.0351 47.3204 13.2115 47.2073 13.3612L41.6959 20.6564H47.377C47.5101 20.6564 47.6133 20.693 47.6865 20.7662C47.7597 20.8395 47.7963 20.9426 47.7963 21.0757V23.9712C47.7963 24.1043 47.7597 24.2075 47.6865 24.2807Z"
              fill="#111827"
            />
            <path
              d="M58.2066 12.2962C58.2865 12.2496 58.383 12.2263 58.4961 12.2263H60.7293C61.0088 12.2263 61.1486 12.3627 61.1486 12.6356V23.9678C61.1486 24.1009 61.112 24.2041 61.0388 24.2773C60.9656 24.3505 60.8624 24.3871 60.7293 24.3871H58.403C58.1833 24.3871 58.0202 24.284 57.9137 24.0776L57.6042 23.8779C56.8088 24.4004 55.8736 24.66 54.7986 24.66C53.6438 24.66 52.5755 24.3738 51.5937 23.8047C50.6119 23.2323 49.8331 22.4635 49.2574 21.495C48.6816 20.5265 48.3954 19.4682 48.3954 18.32C48.3954 17.1785 48.6849 16.1235 49.2607 15.1583C49.8398 14.1932 50.6186 13.4311 51.6003 12.8686C52.5821 12.3062 53.6471 12.0266 54.7953 12.0266C55.8969 12.0266 56.8454 12.2962 57.6408 12.8387L58.0003 12.5291C58.0602 12.4226 58.1267 12.3428 58.2066 12.2962ZM56.1964 20.6031C56.5925 20.3901 56.9086 20.0872 57.1383 19.6979C57.3679 19.3085 57.4844 18.8658 57.4844 18.3699C57.4844 17.8741 57.3712 17.4281 57.1449 17.032C56.9186 16.636 56.6058 16.3232 56.2131 16.0969C55.8204 15.8705 55.381 15.7574 54.9018 15.7574C54.4126 15.7574 53.9733 15.8706 53.5805 16.0935C53.1878 16.3165 52.875 16.6294 52.6487 17.032C52.4224 17.4314 52.3092 17.8807 52.3092 18.3733C52.3092 18.8758 52.419 19.3184 52.6387 19.7045C52.8584 20.0906 53.1645 20.3934 53.5539 20.6064C53.9433 20.8194 54.3826 20.9259 54.8718 20.9259C55.3578 20.9259 55.8004 20.8161 56.1964 20.6031Z"
              fill="#111827"
            />
            <path
              d="M73.6989 12.7122C74.4477 13.1715 75.0234 13.8171 75.4328 14.6524C75.8388 15.4878 76.0452 16.453 76.0452 17.5479V23.9711C76.0452 24.1042 76.0085 24.2074 75.9353 24.2806C75.8621 24.3538 75.7589 24.3904 75.6258 24.3904H72.5607C72.4275 24.3904 72.3244 24.3538 72.2511 24.2806C72.1779 24.2074 72.1413 24.1042 72.1413 23.9711V17.9905C72.1413 17.5146 72.0548 17.0986 71.8851 16.7325C71.7153 16.3697 71.4724 16.0869 71.1595 15.8872C70.8467 15.6875 70.4806 15.5876 70.0679 15.5876C69.612 15.5876 69.2026 15.6941 68.8299 15.9071C68.4604 16.1201 68.1709 16.3997 67.9646 16.7392C67.7582 17.0786 67.655 17.4347 67.655 17.8008V23.9744C67.655 24.254 67.5186 24.3938 67.2457 24.3938H64.2105C64.0774 24.3938 63.9742 24.3572 63.901 24.2839C63.8277 24.2107 63.7911 24.1076 63.7911 23.9744V9.15445C63.7911 9.02133 63.8277 8.91815 63.901 8.84493C63.9742 8.77171 64.0774 8.73511 64.2105 8.73511H67.2457C67.5186 8.73511 67.655 8.87489 67.655 9.15445V13.2813C68.1376 12.9085 68.6934 12.6057 69.3291 12.376C69.9647 12.1464 70.5505 12.0299 71.093 12.0299C72.0781 12.0266 72.95 12.2562 73.6989 12.7122Z"
              fill="#111827"
            />
            <path
              d="M87.4238 12.2962C87.5037 12.2496 87.6002 12.2263 87.7134 12.2263H89.9465C90.2261 12.2263 90.3659 12.3627 90.3659 12.6356V23.9678C90.3659 24.1009 90.3293 24.2041 90.256 24.2773C90.1828 24.3505 90.0797 24.3871 89.9465 24.3871H87.6202C87.4005 24.3871 87.2375 24.284 87.131 24.0776L86.8215 23.8779C86.026 24.4004 85.0908 24.66 84.0159 24.66C82.861 24.66 81.7927 24.3738 80.8109 23.8047C79.8291 23.2323 79.0504 22.4635 78.4779 21.495C77.9022 20.5265 77.616 19.4682 77.616 18.32C77.616 17.1785 77.9055 16.1235 78.4813 15.1583C79.057 14.1932 79.8391 13.4311 80.8209 12.8686C81.8027 12.3062 82.8677 12.0266 84.0159 12.0266C85.1175 12.0266 86.066 12.2962 86.8614 12.8387L87.2208 12.5291C87.2774 12.4226 87.344 12.3428 87.4238 12.2962ZM85.417 20.6031C85.813 20.3901 86.1292 20.0872 86.3589 19.6979C86.5885 19.3085 86.705 18.8658 86.705 18.3699C86.705 17.8741 86.5918 17.4281 86.3655 17.032C86.1392 16.636 85.8264 16.3232 85.4336 16.0969C85.0409 15.8705 84.6016 15.7574 84.1224 15.7574C83.6331 15.7574 83.1938 15.8706 82.8011 16.0935C82.4084 16.3165 82.0956 16.6294 81.8693 17.032C81.643 17.4347 81.5298 17.8807 81.5298 18.3733C81.5298 18.8758 81.6396 19.3184 81.8593 19.7045C82.0789 20.0906 82.3851 20.3934 82.7745 20.6064C83.1639 20.8194 83.6032 20.9259 84.0924 20.9259C84.5817 20.9259 85.0176 20.8161 85.417 20.6031Z"
              fill="#111827"
            />
            <path
              d="M102.547 12.8686C103.528 13.4311 104.307 14.1932 104.886 15.1583C105.465 16.1235 105.752 17.1785 105.752 18.32C105.752 19.4682 105.465 20.5265 104.89 21.495C104.314 22.4635 103.538 23.2323 102.557 23.8047C101.575 24.3771 100.507 24.66 99.3517 24.66C98.2767 24.66 97.3415 24.4004 96.5461 23.8779L96.2366 24.0776C96.1301 24.284 95.967 24.3871 95.7441 24.3871H93.4211C93.2879 24.3871 93.1848 24.3505 93.1115 24.2773C93.0383 24.2041 93.0017 24.1009 93.0017 23.9678V9.11784C93.0017 8.84494 93.1415 8.7085 93.4211 8.7085H96.4762C96.7558 8.7085 96.8956 8.84494 96.8956 9.11784V12.5058C97.2484 12.3461 97.6244 12.2263 98.0238 12.1464C98.4198 12.0665 98.8625 12.0266 99.3517 12.0266C100.497 12.0266 101.565 12.3062 102.547 12.8686ZM100.596 20.6031C100.986 20.3901 101.292 20.0906 101.512 19.7012C101.731 19.3151 101.841 18.8692 101.841 18.3699C101.841 17.8741 101.728 17.4281 101.502 17.0287C101.275 16.6293 100.963 16.3165 100.57 16.0902C100.177 15.8672 99.7344 15.7541 99.2485 15.7541C98.766 15.7541 98.33 15.8672 97.9373 16.0935C97.5446 16.3198 97.2317 16.6327 97.0054 17.0287C96.7791 17.4248 96.6659 17.8707 96.6659 18.3666C96.6659 18.8625 96.7824 19.3051 97.0121 19.6945C97.2417 20.0839 97.5579 20.3868 97.9539 20.5998C98.35 20.8127 98.7926 20.9193 99.2818 20.9193C99.771 20.9193 100.207 20.8161 100.596 20.6031Z"
              fill="#111827"
            />
            <path
              d="M107.575 10.6354V7.9197C107.575 7.64014 107.712 7.50037 107.985 7.50037H111.08C111.359 7.50037 111.499 7.64014 111.499 7.9197V10.6354C111.499 10.915 111.359 11.0548 111.08 11.0548H107.985C107.712 11.0548 107.575 10.915 107.575 10.6354ZM111.373 24.2806C111.3 24.3538 111.196 24.3904 111.063 24.3904H107.998C107.865 24.3904 107.762 24.3538 107.689 24.2806C107.615 24.2074 107.579 24.1042 107.579 23.9711V12.6389C107.579 12.366 107.719 12.2296 107.998 12.2296H111.063C111.343 12.2296 111.483 12.366 111.483 12.6389V23.9711C111.483 24.1042 111.446 24.2074 111.373 24.2806Z"
              fill="#111827"
            />
          </svg>
        </a>

        {/* Desktop Navigation */}
        <nav className="hidden md:flex items-center space-x-8">
          <a
            href="#how-it-works"
            className="text-sm font-medium text-foreground hover:text-gold transition-colors duration-200"
          >
            How It Works
          </a>

          <a
            href="#for-borrowers"
            className="text-sm font-medium text-foreground hover:text-gold transition-colors duration-200"
          >
            For Borrowers
          </a>
          <a
            href="#for-investors"
            className="text-sm font-medium text-foreground hover:text-gold transition-colors duration-200"
          >
            For Investors
          </a>
        </nav>

        {/* CTA Buttons */}
        <div className="hidden md:flex items-center gap-4">
          <CustomButton
            href="mailto:modakaryan11@gmail.com"
            variant="outline"
            className="border-gold-200 hover:bg-gold-50 hover:text-gold-700"
            onClick={toggleMenu}
          >
            Let's connect
          </CustomButton>
        </div>

        {/* Mobile Menu Button */}
        <button
          className="md:hidden focus:outline-none"
          onClick={toggleMenu}
          aria-label="Toggle menu"
        >
          <div className="relative w-6 h-5">
            <span
              className={cn(
                "absolute h-0.5 w-6 bg-foreground rounded-full transition-all duration-300 ease-out",
                menuOpen ? "top-2 rotate-45" : "top-0"
              )}
            />
            <span
              className={cn(
                "absolute h-0.5 w-6 bg-foreground rounded-full top-2 transition-all duration-300 ease-out",
                menuOpen ? "opacity-0" : "opacity-100"
              )}
            />
            <span
              className={cn(
                "absolute h-0.5 w-6 bg-foreground rounded-full transition-all duration-300 ease-out",
                menuOpen ? "top-2 -rotate-45" : "top-4"
              )}
            />
          </div>
        </button>

        {/* Mobile Menu */}
        <div
          className={cn(
            "absolute left-0 right-0 bg-white/95 backdrop-blur-md overflow-hidden transition-all duration-300 ease-in-out md:hidden z-40",
            menuOpen ? "max-h-screen opacity-100 translate-y-0" : "max-h-0 opacity-0 -translate-y-4",
            "top-full"
          )}
        >
          <div className="flex flex-col items-center justify-center h-full space-y-8 p-8">
            <a
              href="#how-it-works"
              className="text-lg font-medium hover:text-zahabi-gold transition-colors"
              onClick={toggleMenu}
            >
              How It Works
            </a>

            <a
              href="#for-borrowers"
              className="text-lg font-medium hover:text-zahabi-gold transition-colors"
              onClick={toggleMenu}
            >
              For Borrowers
            </a>
            <a
              href="#for-investors"
              className="text-lg font-medium hover:text-zahabi-gold transition-colors"
              onClick={toggleMenu}
            >
              For Investors
            </a>
            <CustomButton
              href="mailto:modakaryan11@gmail.com"
              size="lg"
              variant="outline"
              className="border-gold-200 hover:bg-gold-50 hover:text-gold-700"
              onClick={toggleMenu}
            >
              Let's connect
            </CustomButton>
          </div>
        </div>
      </div>
    </header>
  );
};

export default Navbar;
